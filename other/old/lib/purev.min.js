"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e,t,n){document.addEventListener?e.addEventListener(t.substring(2),n,!1):document.attachEvent&&e.attachEvent(t,n)}function t(t,n,o){var i=document.querySelector("["+p+"="+t+"]")||document.getElementById(t)||t;if("object"!==(void 0===i?"undefined":_typeof(i))||d(i.querySelectorAll))return void console.warn("没有命名为"+t+"的dom元素");var l;l=i.hasAttribute(c)?[i]:i.querySelectorAll("["+c+"]");for(var u=!1,a=[],s=0;s<l.length;s++){var f=l[s],g=f.getAttribute(c),m=r(f.value,g,f);!0!==m&&(!0!==f._hasAttach&&e(f,"onclick",function(){this.setAttribute("pv-res","none"),this._pv_np&&this.removeAttribute("placeholder")}),f.setAttribute("pv-res","fail"),null===f.getAttribute("placeholder")&&(f._pv_np=!0,f.setAttribute("placeholder",m)),a.push(m),u||(u=!0,v.toast(m)))}return u?o&&o():n&&n(),a}function n(e,t){var n={},o=!0;for(var i in e)i in t?(n[i]=r(e[i],t[i]),!0!==n[i]&&o&&(o=!1)):(n[i]=null,console.warn("属性"+i+"不在验证规则中"));return{result:o,info:n}}function r(e,t,n){var r="";if(-1!=t.indexOf("lengthOfAny")){var o=t.substring(12,t.length-1).split(",");void 0===o[1]&&(o[1]=o[0]);r=e.length>=parseInt(o[0])&&e.length<=parseInt(o[1])||i("lengthOfAny",o)}else r=l(t,e);return!0===r?v.onOnePass&&(n?v.onOnePass(n,r):v.onOnePass(r)):v.onOneFail&&(n?v.onOneFail(n,r):v.onOneFail(r)),r}function o(e){throw new Error(e)}function i(e,t){if(void 0==t)return f(e,"express")?h.error[g].express:h.error[g][e];var n="";return f(e,"number")&&(n=" 且长度为"),t[0]==t[1]?h.error[g][e]+n+t[0]:h.error[g][e]+n+"["+t[0]+","+t[1]+"]"}function l(e,t){if(-1!=e.indexOf("notnull")){if(0==t.length)return a("notnull")}else if(-1!=e.indexOf("null")){var n=e.split(" "),r="null"==n[0]?n[1]:n[0];if((""===r||d(r))&&o("null 关键字不能单独使用"),-1!=r.indexOf("range")){var i=u(e,t);if(!0!==i&&""!=t)return i}if(!s(r).test(t)&&""!=t)return a(r)}else if(-1!=e.indexOf("range")){var i=u(e,t);if(!0!==i)return i}else if(!s(e).test(t))return a(e);return!0}function u(e,t){var n=e.substring(6,e.length-1).split(",");return e="number",s(e).test(t)?!(parseInt(t)<parseInt(n[0])||parseInt(t)>parseInt(n[1]))||i("range",n):i("number")}function a(e){var t=0;if(-1!=e.indexOf("range")?t=6:-1!=e.indexOf("letterStart")?t=12:-1!=e.indexOf("length")?t=7:f(e,"number")&&"number"!=e&&(t=7),0!=t){var n=e.substring(t,e.length-1).split(",");return void 0===n[1]&&(n[1]=n[0]),i(e.substring(0,t-1),n)}return i(e)}function s(e){var t=-1,n=-1;if(-1!=e.indexOf("length")){var r=e.substring(7,e.length-1).split(",");e="length",t=r[0],void 0==r[1]&&(r[1]=r[0]),n=r[1]}else if(-1!=e.indexOf("letterStart")){var r=e.substring(12,e.length-1).split(",");e="letterStart",t=r[0],void 0==r[1]&&(r[1]=r[0]),n=r[1]}else if(f(e,"number")&&"number"!=e){var r=e.substring(7,e.length-1).split(",");e="number",t=r[0],void 0==r[1]&&(r[1]=r[0]),n=r[1]}else f(e,"express")&&(t=e.substring(8,e.length-1),e="express");if(e in h.regExp)return h.regExp[e];switch(e){case"number":return t>=0?new RegExp("^-?(\\d{"+t+","+n+"})$"):/^-?(\d+)$/;case"letterStart":return new RegExp("^([a-zA-Z]([a-zA-Z\\d]){"+(parseInt(t)-1)+","+(parseInt(n)-1)+"})$");case"length":return new RegExp("^(([a-zA-Z\\d]){"+t+","+n+"})$");case"express":return new RegExp(t);default:return"null"}}function f(e,t){return-1!==e.indexOf(t)}function d(e){return void 0===e}var p="pv-form",c="pv-rule",g="EN",m="object"===("undefined"==typeof document?"undefined":_typeof(document))&&void 0!==document.body,h={regExp:{null:/^\S{0}$/,date:/^(([12]\d{3}-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2]\d)|3(0|1))))$/,email:/^((\w*@\w*\.[A-Za-z.]+(\.)?[A-Za-z]+))$/,decimal:/^-?[1-9]\d*.\d*|0.\d*[1-9]\d*$/,idcard:/^(\d{17}(X|\d))$/,url:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+$/,phone:/^([1]\d{10})$/},error:{CN:{null:"可以为空",notnull:"必填",date:"格式为XXXX-XX-XX",email:"格式为XXX@XX.XX",number:"须为纯数字",idcard:"17位数字加一位数字或X",length:"输入长度为",url:"请输入正确的网址",decimal:"请正确的小数",lengthOfAny:"输入长度为",phone:"须为11位纯数字",letterStart:"字母开头且长度为",range:"数字不在范围内",express:"自定义错误"},EN:{null:"can be empty",notnull:"required",date:"The format is XXXX-XX-XX",email:"The format is XXX@XX.XX",number:"must be a pure number",idcard:"17 digits plus one digit or X",length:"Enter the length is",url:"Please enter the correct URL",decimal:"Please correct the decimal",lengthOfAny:"Input length is",phone:"It must be 11 digits",letterStart:"The beginning of the letter and the length is ",range:"The number is not in range",express:"Custom Error"}}};m&&function(){var e=document.createElement("style");e.innerHTML="[pv-res=fail]{color:#fa4545!important}[pv-res=fail]::-webkit-input-placeholder{color:#fa4545!important}[pv-res=fail]::-moz-placeholder{color:#fa4545!important}[pv-res=fail]:-moz-placeholder{color:#fa4545!important}[pv-res=fail]:-ms-input-placeholder{color:#fa4545!important}",document.head.appendChild(e)}();var v=function(e,o,i){return"object"===(void 0===e?"undefined":_typeof(e))?n(e,o):"string"!=typeof o&&m?t(e,o,i):r(e,o)};v.toast=function(e){m?alert(e):console.log(e)},v.info=function(e,t){if("object"!==(void 0===e?"undefined":_typeof(e)))h.error[g][e]=t;else for(var n in e)v.info(n,e[n])},v.reg=function(e,t){if("object"!==(void 0===e?"undefined":_typeof(e)))h.regExp[e]=t;else for(var n in e)_info(n,e[n])},v.lang=function(e){"CN"!==e&&"EN"!==e&&o("Language can only be set to CN or EN"),g=e},"undefined"!=typeof module?module.exports=v:d(window.purev)?window.purev=v:window.$PUREV=v}();